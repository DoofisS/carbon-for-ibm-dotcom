(window.webpackJsonp=window.webpackJsonp||[]).push([[497],{"../../node_modules/@storybook/addon-docs/blocks.js":function(e,n,t){"use strict";var o=t("../../node_modules/util-deprecate/browser.js"),r=t.n(o),s=t("../../node_modules/ts-dedent/esm/index.js"),a=t("../../node_modules/@storybook/addon-docs/dist/esm/blocks/index.js");t.d(n,"a",(function(){return a.Description})),t.d(n,"b",(function(){return a.Meta})),t.d(n,"c",(function(){return a.Props}));r()((()=>{}),s.a`
    Importing from '@storybook/addon-docs/blocks' is deprecated, import directly from '@storybook/addon-docs' instead:
    
    https://github.com/storybookjs/storybook/blob/next/MIGRATION.md#deprecated-scoped-blocks-imports
`)()},"../../node_modules/@storybook/addon-docs/dist/esm/index.js":function(e,n,t){"use strict";var o=t("../../node_modules/@storybook/addon-docs/dist/esm/blocks/index.js");t.d(n,"a",(function(){return o.AddContext}))},"./docs/feature-flags.stories.mdx":function(e,n,t){"use strict";t.r(n),t.d(n,"__page",(function(){return m}));t("../../node_modules/core-js/modules/es.object.keys.js"),t("../../node_modules/core-js/modules/es.array.index-of.js"),t("../../node_modules/core-js/modules/es.symbol.js"),t("../../node_modules/core-js/modules/es.object.assign.js"),t("../../node_modules/core-js/modules/es.function.bind.js"),t("../../node_modules/core-js/modules/es.object.define-property.js"),t("../../node_modules/core-js/modules/es.array.filter.js"),t("../../node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),t("../../node_modules/core-js/modules/es.array.for-each.js"),t("../../node_modules/core-js/modules/web.dom-collections.for-each.js"),t("../../node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),t("../../node_modules/core-js/modules/es.object.define-properties.js"),t("../../node_modules/react/index.js");var o=t("../../node_modules/@mdx-js/react/dist/esm.js"),r=t("../../node_modules/@storybook/addon-docs/dist/esm/index.js"),s=t("../../node_modules/@storybook/addon-docs/blocks.js"),a=["components"];function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){d(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function d(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function c(){return c=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},c.apply(this,arguments)}function u(e,n){if(null==e)return{};var t,o,r=function(e,n){if(null==e)return{};var t,o,r={},s=Object.keys(e);for(o=0;o<s.length;o++)t=s[o],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(o=0;o<s.length;o++)t=s[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var p={};function f(e){var n=e.components,t=u(e,a);return Object(o.b)("wrapper",c({},p,t,{components:n,mdxType:"MDXLayout"}),Object(o.b)(s.b,{title:"Overview/Feature flags",mdxType:"Meta"}),Object(o.b)(s.a,{markdown:"\x3c!-- START doctoc generated TOC please keep comment here to allow auto update --\x3e\n\x3c!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE --\x3e\n## Table of contents\n\n- [Feature Flags](#feature-flags)\n  - [Overview](#overview)\n  - [Creating a Feature Flag](#creating-a-feature-flag)\n  - [Activating Feature Flag in Unit Tests](#activating-feature-flag-in-unit-tests)\n- [Using Feature Flags](#using-feature-flags)\n  - [Wrapping a Component with a Feature Flag](#wrapping-a-component-with-a-feature-flag)\n  - [Wrapping Storybook Stories with Feature Flags](#wrapping-storybook-stories-with-feature-flags)\n  - [Turning On/Off Feature Flags Locally](#turning-onoff-feature-flags-locally)\n\n\x3c!-- END doctoc generated TOC please keep comment here to allow auto update --\x3e\n\n# Feature Flags\n\n> Guidelines for how to create and use feature flags in the Web Components package\n\n## Overview\n\nFeature flags should be used when a particular feature is not ready for public\ncomsumption. This can pertain to proof of concepts, works in progress that will\nnot be ready for the next release, etc.\n\n## Creating a Feature Flag\n\nWithin the file `/packages/web-components/src/globals/internal/feature-flags.ts`, \nadd a line with the following structure:\n\n```javascript\nexport const DDS_FEATURE_NAME: boolean = process.env.DDS_FEATURE_NAME === 'true' || DDS_FLAGS_ALL || false;\n```\n\nThen, add `DDS_FEATURE_NAME` to `.env.example` in the root of the package:\n\n```text\n# Feature Flags\nDDS_FEATURE_NAME=<boolean flag to turn on or off feature xyz>\n```\n\n## Activating Feature Flag in Unit Tests\n\nIn order for unit tests to pass, the feature flag needs to be activated in \nthe unit test configuration. To do this, in \n`packages/web-components/tests/karma.conf.js`, add the following in \n`DefinePlugin`:\n\n```javascript\nnew webpack.DefinePlugin({\n  'process.env.DDS_FEATURE_NAME': JSON.stringify('true'),\n})\n```\n\n> NOTE: You may need to also add a `@ts-ignore` to your test as typescript\n> checks will throw an error if a component may return `undefined`: \n\n```javascript\nimport { Default } from '../__stories__/feature-name.stories';\n\nconst template = (props?) =>\n  // @ts-ignore: Behind feature flag\n  Default({\n    parameters: {\n      props: {\n        'dds-feature-name': props,\n      },\n    },\n  });\n```\n\n# Using Feature Flags\n\n## Wrapping a Component with a Feature Flag\nOnce a flag is created, it can then be imported for use within a component.\n\nFor example:\n\n```javascript\nimport { LitElement } from 'lit-element';\nimport { DDS_FEATURE_NAME } from '../../globals/internal/feature-flags';\nimport ddsSettings from '@carbon/ibmdotcom-utilities/es/utilities/settings/settings.js';\nconst { stablePrefix: ddsPrefix } = ddsSettings;\n\n/**\n * EXPERIMENTAL: My Feature\n *\n * @element dds-my-feature\n */\nclass DDSMyFeature extends LitElement {\n  ...\n}\n// Define the new element\nif (DDS_FEATURE_NAME) {\n  customElements.define(`${ddsPrefix}-callout-data`, DDSMyFeature);\n}\n\nexport default !DDS_FEATURE_NAME ? undefined : DDSMyFeature;\n```\n\n## Wrapping Storybook Stories with Feature Flags\n\nWhen rendering the Storybook instance, experimental features should not appear\nunless the flag is enabled. Any storybook stories should be exported with the \nfeature flag:\n\n```javascript\nimport { number, select, text } from '@storybook/addon-knobs';\nimport { html } from 'lit-element';\nimport readme from './README.stories.mdx';\nimport '../my-feature';\nimport { DDS_MY_FEATURE } from '../../../internal/feature-flags';\n\nexport const Default = !DDS_MY_FEATURE\n  ? undefined\n  : args => {\n      ...\n    };\n\nexport default !DDS_MY_FEATURE\n ? undefined\n : {\n     title: 'Components/My feature',\n     ...\n   };\n```\n\n## Turning On/Off Feature Flags Locally\n\nTo enable a feature locally, follow the instructions on [environment variables](https://github.com/carbon-design-system/carbon-for-ibm-dotcom/blob/main/packages/react/docs/environment-variables.md).\n\nReplace the helper text with the value `true`. For example:\n\n`.env`\n\n```text\n# Feature Flags\nDDS_FEATURE_NAME=true\n```\n\nOnce the flag is in place, storybook can be deployed and will honor the flag.\n",mdxType:"Description"}))}f.isMDXComponent=!0;var m=function(){throw new Error("Docs-only story")};m.parameters={docsOnly:!0};var b={title:"Overview/Feature flags",includeStories:["__page"]},g={};b.parameters=b.parameters||{},b.parameters.docs=l(l({},b.parameters.docs||{}),{},{page:function(){return Object(o.b)(r.a,{mdxStoryNameToKey:g,mdxComponentAnnotations:b},Object(o.b)(f,null))}});n.default=b}}]);